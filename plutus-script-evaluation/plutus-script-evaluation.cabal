cabal-version: 3.0
name:          plutus-script-evaluation
version:       0.1.0.0

common lang
  default-language:   Haskell2010
  default-extensions:
    BangPatterns
    BlockArguments
    DataKinds
    DeriveAnyClass
    DeriveFoldable
    DeriveFunctor
    DeriveGeneric
    DeriveLift
    DeriveTraversable
    DerivingStrategies
    ExplicitForAll
    FlexibleContexts
    GADTs
    GeneralizedNewtypeDeriving
    ImportQualifiedPost
    LambdaCase
    NamedFieldPuns
    NamedFieldPuns
    NumericUnderscores
    OverloadedStrings
    QuasiQuotes
    RecordWildCards
    ScopedTypeVariables
    StandaloneDeriving
    TupleSections
    TypeApplications
    ViewPatterns

  ghc-options:
    -O2 -Wall -Widentities -Wincomplete-record-updates
    -Wincomplete-uni-patterns -Wnoncanonical-monad-instances
    -Wredundant-constraints -Wunused-packages

common deps
  build-depends: base >=4.9 && <5

library
  import:          lang, deps
  hs-source-dirs:  lib
  exposed-modules:
    FileStorage
    LedgerEvents
    LedgerStates
    Render
    Streaming
    Types

  build-depends:
    , async
    , base16-bytestring
    , cardano-api                                  ^>=9.3.0.0
    , cardano-ledger-alonzo
    , cardano-ledger-core
    , cardano-slotting                             ^>=0.2.0.0
    , deepseq
    , dlist
    , ouroboros-consensus
    , ouroboros-consensus-cardano
    , path
    , path-io
    , plutus-ledger-api
    , plutus-ledger-api:plutus-ledger-api-testlib
    , serialise
    , string-interpolate                           ^>=0.3
    , text
    , transformers

executable dump-script-events
  import:         lang, deps
  hs-source-dirs: dump-script-events
  main-is:        Main.hs
  ghc-options:    -threaded -rtsopts
  other-modules:
    Dump
    Options

  build-depends:
    , cardano-api               ^>=9.3.0.0
    , optparse-applicative
    , path
    , path-io
    , plutus-script-evaluation
    , with-utf8

executable aggregate-script-events
  import:         lang, deps
  hs-source-dirs: aggregate-script-events
  main-is:        Main.hs
  ghc-options:    -threaded -rtsopts
  other-modules:
    Aggregate
    Options

  build-depends:
    , cardano-api                                  ^>=9.3.0.0
    , optparse-applicative
    , path
    , path-io
    , plutus-ledger-api
    , plutus-ledger-api:plutus-ledger-api-testlib
    , plutus-script-evaluation
    , with-utf8
